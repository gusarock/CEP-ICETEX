<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Crédito Express Posgrado</title>
    <link rel="icon" href="logo2.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
      body {
    margin: 0;
    padding: 0;
    background-image: url('fondosimuladorweb.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* Fija la imagen de fondo */
    min-height: 100vh; /* Asegura que el body cubra toda la altura de la ventana */
    display: flex;
    align-items: center;
    justify-content: center;
}

.container {
    text-align: center;
    color: #ffffff;
    margin: 10px;
    padding: 20px; /* Espaciado para evitar que el contenido toque los bordes */
    background-color: rgba(236, 228, 228, 0.5); /* Fondo semi-transparente para destacar el contenido */
    border-radius: 20px; /* Bordes redondeados */
    max-width: 1400px; /* Ancho máximo del contenedor */
    width: 100%; /* Ajuste automático del ancho */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); /* Sombra para resaltar */
    overflow: auto; /* Permite scroll si el contenido es más grande que la ventana */
}

.capture-box, .simulation-box {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 60px;
    border-radius: 20px;
    margin-bottom: 15px;
    max-width: 100%; /* Asegura que el contenedor no exceda el contenedor principal */
    box-sizing: border-box; /* Incluye padding y border en el ancho total */
}

.button-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

      
     

        .cta-button1, .cta-button2 {
            padding: 25px 45px;
            font-size: 35px;
            background-color: #24224c;
            color: #ffffff;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-family: 'Century Gothic';
            display: inline-block;
        }

        .cta-button1:hover, .cta-button2:hover {
            background-color: #38367a;
        }

        .capture-box, .simulation-box {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 60px;
            border-radius: 20px;
            justify-content: center;
            align-items: stretch;
            max-width: 1400px;
            width: 150%;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1 1 calc(50% - 50px);
            display: flex;
            flex-direction: column;
            position: relative;
            align-items: center;
            margin-bottom: 50px;
        }

        .capture-input {
            width: 90%;
            padding: 5px;
            margin-bottom: 30px;
            font-family: 'Century Gothic';
            font-size: 45px;
            transition: font-size 0.2s ease-in-out;
            text-align: center;
            border-radius: 20px;
        }

        .capture-input:focus {
            font-size: 45px;
        }

        .capture-box label, .simulation-box label {
            font-family: 'Century Gothic';
            font-size: 35px;
            color: #000000;
            display: block;
            margin-bottom: 30px;
            text-align: center;
        }

        .tooltip {
            visibility: hidden;
            width: 500px;
            background-color: #24224c;
            color: #ffffff;
            text-align: center;
            border-radius: 20px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 100%;
            left: 75%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-family: 'Century Gothic';
            font-size: 20px;
        }

        .form-group:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .capture-box .row, .simulation-box .row {
            display: flex;
            flex-wrap: wrap;
            gap: 70px;
            justify-content: center;
        }

        .error-message {
            color: red;
            font-family: 'Century Gothic';
            font-size: 20px;
            position: relative;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }

        .info-message {
            color: grey;
            font-family: 'Century Gothic';
            font-size: 20px;
            margin-top: -10px;
        }

        .simulation-box {
            display: flex;
            flex-direction: row;
            justify-content: center;
            max-width: 1400px;
            width: 90%;
            margin: 0 auto;
        }

        .simulation-column {
            padding: 10px;
            background-color: rgba(220, 218, 254, 0.8);
            border-radius: 15px;
            flex: 1;
            margin: 10px;
        }

        .simulation-column h3 {
            font-family: 'Century Gothic';
            font-size: 25px;
            color: #000000;
            margin-bottom: 15px;
        }

        .simulation-column p {
            font-family: 'Century Gothic';
            font-size: 25px;
            color: #000000;
        }

        .terms-message {
            color: rgb(0, 0, 0);
            font-family: 'Century Gothic';
            font-size: 20px;
            margin-top: 10px;
            text-align: center;
        }

        .terms-message a {
            color: rgb(67, 5, 239);
            text-decoration: underline;
        }

        .terms-message a:hover {
            color: black;
        }

        .capture-title {
            font-family: 'Century Gothic';
            font-size: 55px;
            color: #24224c;
            margin-bottom: 30px;
            text-align: center;
        }

        .note {
            font-family: 'Century Gothic';
            font-size: 15px;
            color: grey;
            text-align: left;
            margin-top: -10px;
        }

        #plan-de-pagos-table {
            display: none;
            font-family: 'Century Gothic';
            font-size: 25px;
            color: rgb(12, 12, 12);
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            background-color: rgba(187, 178, 178, 0.8);
            border-radius: 10px;
            overflow: hidden;
        }

        #plan-de-pagos-table th, #plan-de-pagos-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
            font-family: 'Century Gothic';
            font-size: 25px;
            color: rgb(12, 12, 12);
        }

        #plan-de-pagos-table th {
            background-color: #24224c;
            color: #ffffff;
            font-family: 'Century Gothic';
            font-size: 25px;
           
        }

        #plan-de-pagos-table tr:nth-child(even) {
            background-color: #f2f2f2;
            font-family: 'Century Gothic';
            font-size: 25px;
        }
    </style>
<script>
    function formatCurrency(value) {
        let number = value.replace(/[^0-9]/g, '');
        return number.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
    }

    function parseCurrency(value) {
        return value.replace(/\./g, '');
    }

    function handleInput(event) {
        let input = event.target;
        input.value = formatCurrency(parseCurrency(input.value));
        updateSimulation();
    }

    function calcularAFIM(valor, nperiodos) {
        const afimTotal = valor * 0.02; // 2% del valor solicitado
        const afimPorCuota = afimTotal / 6; // Dividir el total del AFIM entre 6 cuotas
        return { afimTotal, afimPorCuota };
    }

    function calcularTotalDesembolsado(valor, nperiodos, incrementoAnual) {
        let totalDesembolsado = 0;
        let valorActual = valor;

        for (let i = 0; i < nperiodos; i++) {
            totalDesembolsado += valorActual;
            if ((i + 1) % 2 === 0) { // Incremento cada 2 semestres (1 año)
                valorActual *= (1 + incrementoAnual);
            }
        }

        return totalDesembolsado;
    }

    function updateSimulation() {
        const valor = parseFloat(parseCurrency(document.getElementById('valor').value));
        const nperiodos = parseInt(document.getElementById('nperiodos').value);
        const pago = parseFloat(parseCurrency(document.getElementById('pago').value));
        const simulationBox = document.getElementById('simulation-box');
        const planPagos = document.getElementById('plan-pagos');

        if (!isNaN(valor) && !isNaN(nperiodos) && !isNaN(pago)) {
            const tasaInteres = 'IPC+8%';
            const tasaEA = '18,23%';
            const inflacion = '9,28%';
            const incrementoAnual = 0.1128; // 11.28% expresado como decimal
            const totalAPagarEstudio = pago * nperiodos;
            const saldoAFechaEstudio = valor - totalAPagarEstudio;
            const cuotasPendientes = saldoAFechaEstudio > 0 ? saldoAFechaEstudio : 0;

            const { afimTotal, afimPorCuota } = calcularAFIM(valor, nperiodos);
            const totalDesembolsado = calcularTotalDesembolsado(valor, nperiodos, incrementoAnual);

            planPagos.innerHTML = `
                <div class="simulation-column">
                    <h3>Mientras estudias</h3>
                    <p>Valor solicitado por periodo académico: $${formatCurrency(valor.toFixed(0).toString())}</p>
                    <p>Inflación (IPC año anterior): ${inflacion}</p>
                    <p>Incremento anual matrículas (IPC+2%)</p>
                    <p>Total desembolsado: $${formatCurrency(totalDesembolsado.toFixed(0).toString())}</p>
                    <p>Total pagado mientras estudias: $${formatCurrency(totalAPagarEstudio.toFixed(0).toString())}</p>
                    <p>Saldo a la fecha: $${formatCurrency(saldoAFechaEstudio.toFixed(0).toString())}</p>
                </div>
                <div class="simulation-column">
                    <h3>Cuando te gradúes</h3>
                    <p>Tasa de interés: ${tasaInteres}</p>
                    <p>Tasa EA: ${tasaEA}</p>
                    <p>AFIM por cuota: $${formatCurrency(afimPorCuota.toFixed(0).toString())}</p>
                    <p>Cuota mensual después de graduarse: $${formatCurrency(pago.toFixed(0).toString())}</p>
                    <p>Cuotas pendientes: ${nperiodos}</p>
                </div>
            `;
            simulationBox.style.display = 'flex';
        } else {
            simulationBox.style.display = 'none';
        }
    }

    function mostrarPlanDePagos() {
    const valor = parseFloat(parseCurrency(document.getElementById('valor').value));
    const nperiodos = parseInt(document.getElementById('nperiodos').value);
    const pagoInicial = parseFloat(parseCurrency(document.getElementById('pago').value));

    if (isNaN(valor) || isNaN(nperiodos) || isNaN(pagoInicial)) {
        alert('Por favor, complete todos los campos para mostrar el plan de pagos.');
        return;
    }

    const { afimTotal, afimPorCuota } = calcularAFIM(valor, nperiodos);

    const tasaInteresMensual = 0.0116; // 1.16% mensual
    const tabla = document.getElementById('plan-de-pagos-table');
    let tbody = '';

    let saldo = 0;
    let mes = 0;
    let semestre = 1;
    let periodoActual = 0;
    let haMostradoTransicion = false; // Bandera para mostrar la transición

    // Crear una lista de desembolsos incrementales
    const desembolsos = [];
    let valorDesembolso = valor;

    for (let i = 0; i < nperiodos; i++) {
        desembolsos.push(valorDesembolso);
        if ((i + 1) % 2 === 0) { // Incremento cada 2 semestres (1 año)
            valorDesembolso *= (1 + 0.1128); // Aplicar el incremento del 11.28%
        }
    }

    // Inicializar el saldo con el primer desembolso
    saldo = desembolsos[0];

    while (saldo > 0) {
        // Añadir nuevo desembolso cada 6 meses
        if (periodoActual > 0 && periodoActual % 6 === 0 && (periodoActual / 6) < desembolsos.length) {
            saldo += desembolsos[periodoActual / 6];
        }

        // Calcular pagos mes a mes
        for (let j = 1; j <= 6 && saldo > 0; j++) {
            mes++;

            // Mostrar transición entre "Mientras estudias" y "Cuando te gradúes"
            if (mes === 25 && !haMostradoTransicion) {
                tbody += `
                    <tr>
                        <td colspan="7" style="text-align: center; font-weight: bold;">
                            Cuando te gradúes
                        </td>
                    </tr>
                `;
                haMostradoTransicion = true;
            }

            // Ajuste del valor de la cuota a partir del cuarto semestre
            let cuotaMensual = pagoInicial;
            if (semestre >= 4) {
                cuotaMensual *= 2; // Incremento del 100%
            }

            const abonoInteres = saldo * tasaInteresMensual;
            const abonoCapital = cuotaMensual - abonoInteres - afimPorCuota;
            saldo -= abonoCapital;

            if (saldo < 0) saldo = 0;

            // Añadir una fila de encabezado para "Mientras estudias" al inicio
            if (mes === 1) {
                tbody += `
                    <tr>
                        <td colspan="7" style="text-align: center; font-weight: bold;">
                            Mientras estudias
                        </td>
                    </tr>
                `;
            }

            tbody += `
                <tr>
                    <td>${semestre}</td> <!-- Columna para semestre -->
                    <td>${mes}</td> <!-- Columna para mes -->
                    <td>$${formatCurrency(cuotaMensual.toFixed(0).toString())}</td>
                    <td>$${formatCurrency(abonoCapital.toFixed(0).toString())}</td>
                    <td>$${formatCurrency(abonoInteres.toFixed(0).toString())}</td>
                    <td>$${formatCurrency(afimPorCuota.toFixed(0).toString())}</td>
                    <td>$${formatCurrency(saldo.toFixed(0).toString())}</td>
                </tr>
            `;

            if (saldo <= 0) break;
        }
        periodoActual += 6;

        // Incrementar semestre después de cada ciclo de 6 meses
        semestre++;
    }

    tabla.style.display = 'table';
    document.getElementById('plan-de-pagos-tbody').innerHTML = tbody;
}

document.addEventListener('input', handleInput);

</script>

    


</head>
<body>
<div class="container">
    <div class="capture-box">
        <div class="capture-title">
            Planea tu financiación
        </div>
        <div class="row">
            <div class="form-group">
                <label for="valor">¿Cuál es el valor solicitado por periodo académico?</label>
                <input type="text" id="valor" class="capture-input" placeholder="$" required>
                <div class="tooltip">Los periodos académicos pueden ser trimestrales, cuatrimestrales, semestrales o anualizados.</div>
                <span class="note">* El valor máximo permitido es $50,000,000.</span>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <label for="nperiodos">Cantidad de periodos a financiar:*</label>
                <select id="nperiodos" class="capture-input" required>
                    <option value="" selected disabled>Selecciona periodos a financiar</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <label for="pago">¿Cuánto puedes pagar mensualmente mientras estudias?*</label>
                <input type="text" id="pago" class="capture-input" placeholder="$" required>
                <div class="tooltip">La cuota mensual no puede superar el 20% del valor solicitado.</div>
            </div>
        </div>
    </div>

    <span id="error-message" class="error-message"></span>

    <div id="simulation-box" class="simulation-box">
        <div id="plan-pagos" class="row"></div>
    </div>

    <div class="button-container">
        <button class="cta-button2" onclick="mostrarPlanDePagos()">Ver plan de pagos</button>
        <button class="cta-button1" onclick="window.location.href='registro.html'">Solicitar crédito</button>
    </div>

    <table id="plan-de-pagos-table">
        <thead>
            <tr>
                <th>Semestre</th>
                <th>Mes</th>
                <th>Cuota Mensual</th>
                <th>Abono Capital</th>
                <th>Abono Intereses</th>
                <th>AFIM</th>
                <th>Saldo</th>
            </tr>
        </thead>
        <tbody id="plan-de-pagos-tbody"></tbody>
    </table>
</div>
</body>
</html>
